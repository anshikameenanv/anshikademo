<div *ngIf="isLoading;" class="overlay">
  <!-- Loading spinner -->
  <div class="d-flex justify-content-center align-items-center h-100">

    <div id="loading-icon" class="loading-icon">
      <svg class="loader_svg" aria-hidden="true" data-test-id="loading-animation" viewBox="0 0 415 267"
        id="el_BOCLP6pw6" height="135.204">
        <defs>
          <clipPath id="clip-path">
            <rect class="cls-1" x="-27.82" y="29.26" width="414" height="252"></rect>
          </clipPath>
          <clipPath id="clip-path-2" transform="translate(28.82 -14.26)">
            <path class="cls-2" d="M208.05,171.55l1-.17a2,2,0,0,1,2.31,1.62l.52,3a2,2,0,0,1-1.62,2.31l-1,.18-1.22-6.9Z">
            </path>
          </clipPath>
        </defs>
        <title>Ready to take off</title>
        <g id="el_nJfwWliSpS">
          <rect x="1" width="414" height="252" id="el_UR3Rlodp6M"></rect>
          <path d="M180.18,61.26a79,79,0,1,1-79,79,79,79,0,0,1,79-79Z" id="el_2AOouW6tGv"></path>
        </g>
        <g id="el_fHh6bZvsAk_an_oV_fORzTJ" data-animator-group="true" data-animator-type="0">
          <g id="el_fHh6bZvsAk" data-name="cloud 1">
            <rect x="1" width="414" height="252" id="el_4FK2Nmg0Ay">
            </rect>
            <path
              d="M115,64.13a8.87,8.87,0,0,1-8.17,8.92,5.26,5.26,0,0,1-1.64.26H61.32a5.29,5.29,0,0,1-.8-.06,11.73,11.73,0,0,1-4.23-23.06A15.65,15.65,0,0,1,84.82,46a12.67,12.67,0,0,1,5.82-1.42,13,13,0,0,1,12.74,11.1,8.4,8.4,0,0,1,2.8-.48A8.87,8.87,0,0,1,115,64.13Z"
              id="el_4_9ZA_cq7d"></path>
          </g>
        </g>
        <g id="el_VgVZCV8qNA_an_3NflaPQBB" data-animator-group="true" data-animator-type="0">
          <g id="el_VgVZCV8qNA" data-name="cloud 2">
            <path
              d="M311,214.13a8.87,8.87,0,0,1-8.17,8.92,5.26,5.26,0,0,1-1.64.26H257.32a5.29,5.29,0,0,1-.8-.06,11.73,11.73,0,0,1-4.23-23.06A15.65,15.65,0,0,1,280.82,196a12.67,12.67,0,0,1,5.82-1.42,13,13,0,0,1,12.74,11.1,8.4,8.4,0,0,1,2.8-.48A8.87,8.87,0,0,1,311,214.13Z"
              id="el_dRlj1Hg9RO"></path>
          </g>
        </g>
        <g id="el_temZDqRlgT" data-name="streak 1">
          <line x1="100.94" y1="133.96" x2="90.38" y2="136.99" id="el_3LJKXP6cQi"></line>
          <line x1="87.15" y1="138.04" x2="84.31" y2="138.85" id="el_wAGXe2brv4"></line>
          <g id="el_OxDVTE_Xn-" data-name="streak 3">
            <path d="M125.3,188.45l-18.92,6.14,18.92-6.14Zm-24.73,8.16-5.08,1.64,5.08-1.64Z" id="el_IF-94PkyMu">
            </path>
          </g>
        </g>
        <g id="el_nBl2v_54Al" data-name="streak 4">
          <line x1="117.5" y1="192.5" x2="140.5" y2="184.5" id="el_ZDj4i5z_Dm"></line>
          <g id="el_LJK6reGosrf" data-name="streak 2">
            <path d="M77.12,153.22l-10.56,3" id="el_Z_JDKk7UDjQ"></path>
          </g>
        </g>
        <g id="el_UYE6SbXfV0k_an_NQYaZxUU6" data-animator-group="true" data-animator-type="0">
          <g id="el_UYE6SbXfV0k">
            <rect y="15" width="414" height="252" id="el_Q49VKD3ftJU">
            </rect>
            <path
              d="M128.24,150.73q-16.77-.72-40.31-21.1-8,1.35-12.77,2.25Q87.54,155.4,93.54,167.2q10.77-6.47,34.7-16.47Z"
              id="el_fMecw8fHi_b"></path>
            <path
              d="M128.24,150.73q-16.77-.72-40.31-21.1-8,1.35-12.77,2.25Q87.54,155.4,93.54,167.2q10.77-6.47,34.7-16.47Z"
              id="el_D1jFHAaU5-A"></path>
            <rect y="15" width="414" height="252" id="el_apRY-YxWRnw">
            </rect>
            <path d="M189.25,184.07l-2-9.87q13.83-6,20.4-5c1.17,6.49,1.71,9.33,2.22,12.45q-9.17,5.31-20.58,2.41Z"
              id="el_49dX7qX2OUO"></path>
            <path
              d="M209.83,181.66q-9.17,5.33-20.58,2.42l-2-9.88q13.83-6,20.4-5C208.78,175.7,209.32,178.55,209.83,181.66Z"
              id="el_6MjYG4WZzrC"></path>
            <rect y="15" width="414" height="252" id="el_e5kWLz-UmPm">
            </rect>
            <path
              d="M91.19,177q87.81-5.61,137.07-16.74c49.26-11.12,54.47-23.46,55.18-24.88a2.11,2.11,0,0,0-.41-2.59q-13.08-14.44-34.6-15.11T139.19,145.89Q89.85,164.94,86,173.82,84.67,177,91.19,177Z"
              id="el_lVtTG8_VUlw"></path>
            <path
              d="M283.43,135.34c-.7,1.42-5.91,13.77-55.17,24.89Q179,171.34,91.19,177c-4.34.06-6.06-1-5.16-3.14q3.82-8.88,53.16-27.93,87.72-28.9,109.24-28.25T283,132.76A2.07,2.07,0,0,1,283.43,135.34Z"
              id="el_57pTmWJ7LMk"></path>
            <g id="el_cc8Bw02eVrF">
              <path d="M208.05,171.55l1-.17a2,2,0,0,1,2.31,1.62l.52,3a2,2,0,0,1-1.62,2.31l-1,.18-1.22-6.9Z"
                id="el_qRlCB2EUlqE"></path>
              <path d="M208.05,171.55l1-.17a2,2,0,0,1,2.31,1.62l.52,3a2,2,0,0,1-1.62,2.31l-1,.18-1.22-6.9Z"
                id="el_Vg8wVxh1AU5"></path>
            </g>
            <rect y="15" width="414" height="252" id="el_LicSledHA7c">
            </rect>
            <path d="M188.57,181.92l-3.5.6c-1.74-1-2.88-2.86-3.45-5.47l5.65-1,1.3,5.86Z" id="el_mjoXMMEc0Zx"></path>
            <path d="M188.57,181.92l-3.51.6a7.89,7.89,0,0,1-3.44-5.46l5.64-1Z" id="el_r-FahTDftOu"></path>
            <path
              d="M182.31,181.29c-4.05.65-7,1.14-8.77,1.47s-3.69-.66-5.71-3l13.26-2.11A11.49,11.49,0,0,0,182.31,181.29Z"
              id="el_eWlLQtp4wuD"></path>
            <path
              d="M-28.82,29.26v252h414v-252ZM282.41,135.69c-3.42,5.15-8.5,8-12.86,10.28-10.94,5.69-29.73,11.05-42.23,13.89.42-1.24.35-2.52-.15-6.9C266.67,147.39,272.21,141.37,282.41,135.69Z"
              id="el_WKqQGIAqjNG"></path>
            <path
              d="M282.41,135.69c-3.42,5.15-8.5,8-12.86,10.28-10.94,5.69-29.73,11.05-42.23,13.89.42-1.24.35-2.52-.15-6.9C266.67,147.39,272.21,141.37,282.41,135.69Z"
              id="el_Jop5MfiI11I"></path>
            <path
              d="M159.94,180.11l-.17,0-11.83-9.83c15-9.79,56.1-17,67.72-19.49s10.89-1,11.8,4.09q1.56,10.47-9,11.89l-14.66,2.58-.19.05-3,3a7.05,7.05,0,0,1-3.86,2l-37.26,5.88.39-.14Z"
              id="el_bQwoMjIUd89"></path>
            <rect y="15" width="414" height="252" id="el_0atYqxm-SQz">
            </rect>
            <rect y="15" width="414" height="252" id="el_wPp_v7I8Lpz">
            </rect>
            <path
              d="M249,127l1.29,6.57a2,2,0,0,0,2.28,1.59q13.62-2.22,19-11.38c-5.15-2.24-7.13-3.15-11.32-4.25q-1.14,2.64-9.85,5.16h0A2,2,0,0,0,249,127Z"
              id="el_nme275rKKIp"></path>
            <path
              d="M271.56,123.78q-5.38,9.16-19,11.38a2,2,0,0,1-2.29-1.58L249,127a1.72,1.72,0,0,1,0-.39,2,2,0,0,1,1.45-1.91q8.7-2.52,9.84-5.17C264.43,120.63,266.41,121.54,271.56,123.78Z"
              id="el_bGukEPWysRE"></path>
            <path d="M95.83,162.73l-13.21-23m-.56-1.94-2.62-4.61,3-.52" id="el_LChowfwlfDm"></path>
            <rect y="15" width="414" height="252" id="el_8jv5iiosxQl">
            </rect>
            <rect y="15" width="414" height="252" id="el_POb1_FKM6kk">
            </rect>
            <rect y="15" width="414" height="252" id="el_19_W6iW8yXT">
            </rect>
            <path
              d="M224.86,130.72h0a3,3,0,0,1,3.57,2.23l.39,1.66a3,3,0,0,1-2.24,3.57h0A3,3,0,0,1,223,136l-.39-1.66a3,3,0,0,1,2.23-3.57Z"
              id="el_6H5IJpBXI05"></path>
            <path
              d="M211,133.56h0a3,3,0,0,1,3.57,2.23l.39,1.66a3,3,0,0,1-2.23,3.57h0a3,3,0,0,1-3.57-2.23l-.39-1.66a3,3,0,0,1,2.23-3.57Z"
              id="el_3NUcSWpwNv4"></path>
            <path
              d="M196.69,137.44h0a3,3,0,0,1,3.57,2.23l.38,1.65a3,3,0,0,1-2.23,3.57h0a3,3,0,0,1-3.57-2.23l-.38-1.66a3,3,0,0,1,2.23-3.57Z"
              id="el_OGvXamcCYVo"></path>
            <path
              d="M181.45,141.25h0a3,3,0,0,1,3.57,2.23l.38,1.66a3,3,0,0,1-2.23,3.57h0a3,3,0,0,1-3.57-2.23l-.38-1.66a3,3,0,0,1,2.23-3.57Z"
              id="el_MIaQ8dK22fn"></path>
            <path
              d="M165.41,144.91h0a3,3,0,0,1,3.57,2.23l.38,1.66a3,3,0,0,1-2.23,3.57h0a3,3,0,0,1-3.57-2.23l-.38-1.66a3,3,0,0,1,2.23-3.57Z"
              id="el_9kya2VLPwf2"></path>
            <path d="M203.68,169.3l9.51-9M152.66,174q4.91-3.31,6.37-4.17" id="el_75uVnI0RbsZ"></path>
            <path
              d="M159.78,179.89l-17.59-14.81a1,1,0,0,0-.82-.22l-9.29,1.64a1,1,0,0,0-.81,1.15.9.9,0,0,0,.16.39l9.26,13.54a2,2,0,0,0,1.95.85l17.14-2.54Z"
              id="el_YqFT7pvAoyQ"></path>
            <path
              d="M161.49,179.89l-17.15,2.54a2,2,0,0,1-1.94-.85l-9.27-13.53a1.11,1.11,0,0,1-.16-.39,1,1,0,0,1,.82-1.16l9.29-1.64a1,1,0,0,1,.82.22Z"
              id="el__zPse7hZ25w"></path>
            <polygon points="213.68 140.9 225.5 138.82 226.37 143.74 214.55 145.82 213.68 140.9 213.68 140.9"
              id="el_QUxLMqc43fZ"></polygon>
            <path
              d="M106.66,175.4c2.22-.5,3.31-2.56,3.66-4.8.26-1.69-.46-3.23-2.52-3.29C103,167.16,73.12,180.2,80.65,180,86.54,179.8,100.77,176.72,106.66,175.4Z"
              id="el_HHtEvwMgZFi"></path>
          </g>
        </g>
      </svg>
    </div>
  </div>
</div>

<div class="select_page_wrapper">
  <div class="flight_page_wrapper">
    <div *ngIf="!showTicketSummarry">
      <div class="top-filter-nav">
        <div class="filter-nav-link">
          <div class="container">
          </div>
        </div>
        <div class="container" [formGroup]="myForm">
          <div class="bnr_tab" *ngIf="selectedTripType != 'multiCity' ">

            <div class="dFlex btct">
              <div class="btctBlock">
                <mat-form-field appearance="fill">
                  <img class="field_img" src="../../assets/images/aeroplane.svg" alt="">
                  <mat-label>Trip Type</mat-label>
                  <mat-select [(value)]="selectedTripType">
                    <mat-option value="oneway">One Way</mat-option>
                    <mat-option value="roundTrip">Round Trip</mat-option>
                    <mat-option value="multiCity">MultiCity</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="btctBlock bnrOWBlock1 hasRt">
                <div class="example-form">

                  <mat-form-field class="example-full-width" appearance="fill">
                    <img class="field_img" src="../../assets/images/location.png" alt="">
                    <mat-label>
                      Depart From
                    </mat-label>
                    <mat-select formControlName="leavingFrom" (selectionChange)="onSelectionChange($event)">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="leavingFromControl" (input)="onSearchInputChange()"
                          placeholderLabel="Search"></ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngIf="loading" disabled>
                        <mat-spinner diameter="16"></mat-spinner>
                      </mat-option>
                      <mat-option *ngIf="leavingFromOptions?.length === 0 && !loading" disabled>No search
                        results
                        found</mat-option>
                      <mat-option *ngFor="let option of leavingFromOptions" [value]="option">
                        <div class="optionDropDown-container">
                          <div class="detailed-name">{{ option.cityCode }}-{{ option.name }}</div>
                          <div class="city-name">{{ option.cityName }}-{{ option.countryCode }}</div>
                        </div>
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>

                <div class="refresh-btn-box">
                  <button mat-fab (click)="swapValues()">
                    <mat-icon>repeat</mat-icon>
                  </button>
                </div>
              </div>

              <div class="btctBlock bnrOWBlock2 hasRt">
                <div class="example-form">
                  <mat-form-field class="example-full-width" appearance="fill">
                    <img class="field_img" src="../../assets/images/location.png" alt="">
                    <mat-label>Going To</mat-label>
                    <mat-select formControlName="goingTo" (selectionChange)="onSelectionGoingChange($event)">
                      <mat-option>
                        <ngx-mat-select-search [formControl]="goingToFormControl" (input)="onSearchGoingTo()"
                          placeholderLabel="Search"></ngx-mat-select-search>
                      </mat-option>
                      <mat-option *ngIf="loading" disabled>
                        <mat-spinner diameter="16"></mat-spinner>
                      </mat-option>
                      <mat-option *ngFor="let option of goingToOptions" [value]="option">
                        <div class="optionDropDown-container">
                          <div class="detailed-name">{{ option.cityCode }}-{{ option.name }}</div>
                          <div class="city-name">{{ option.cityName }}-{{ option.countryCode }}</div>
                        </div>
                      </mat-option>
                      <mat-option *ngIf="goingToOptions?.length === 0 && !loading" disabled>No search
                        results
                        found</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

              <div class="btctBlock">
                <mat-form-field appearance="fill" class="m_dp dep_date">
                  <mat-label>Departure Date</mat-label>
                  <input matInput formControlName="roundDatesDeparture" [matDatepicker]="picker" [min]="minDate"
                    (dateChange)="updateDates($event)">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

              </div>
              <div class="btctBlock" *ngIf="selectedTripType == 'roundTrip' ">
                <mat-form-field appearance="fill" class="m_dp dep_date">
                  <mat-label>Return Date</mat-label>
                  <input matInput formControlName="roundDatesGoingTo" [matDatepicker]="picker3" [min]="minReturnDate">
                  <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                  <mat-datepicker #picker3></mat-datepicker>
                </mat-form-field>
              </div>
              <div class="btctBlock">
                <div style="position: relative;">
                  <mat-form-field appearance="outline" (click)="toggleTravelerOptions()"
                    class="dep_date traveller_cls multiple_city">
                    <img _ngcontent-yre-c46="" src="../../assets/images/passenger.png" alt="" class="field_img2" />
                    <mat-label>Travelers</mat-label>
                    <input matInput formControlName="travelers" readonly>
                    <mat-error *ngIf="myForm.get('travelers')?.hasError('maxTravelersExceeded')">Maximum travelers
                      exceeded (6).</mat-error>
                  </mat-form-field>
                  <div *ngIf="showTravelerOptions" class="travellerCount">
                    <div *ngIf="showTravelerOptions">
                      <div>
                        <div class="tcNote">
                          We allow up to 9 travelers total per booking.
                        </div>
                        <ul class="tCount">
                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Adults</div>
                              <p class="tcDesc">18 and older</p>
                            </div>
                            <div class="tcInput">
                              <button class="tcButton minus" (click)="decrement('adult')" aria-label="Decrease by one"
                                [disabled]="travelersCount.adult ===  1">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.adult }}</div>
                              <button class="tcButton plus" (click)="increment('adult')" aria-label="Increase by one"
                                [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="icon">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>
                            </div>
                          </li>
                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Children</div>
                              <p class="tcDesc">Age 2 through 17</p>
                            </div>

                            <div class="tcInput">
                              <button class="tcButton minus" aria-label="Decrease by one"
                                (click)="decrement('children')" [disabled]="travelersCount.children === 0">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.children }}</div>
                              <button class="tcButton plus" aria-label="Increase by one" (click)="increment('children')"
                                [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="plus">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>
                            </div>

                          </li>
                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Infants on lap</div>
                              <p class="tcDesc">Yonger then 2</p>
                            </div>
                            <div class="tcInput">
                              <button class="tcButton minus" aria-label="Decrease by one"
                                (click)="decrement('infantOnlap')" [disabled]="travelersCount.infantOnlap === 0">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.infantOnlap}}</div>
                              <button class="tcButton plus" aria-label="Increase by one"
                                (click)="increment('infantOnlap')" [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="plus">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>

                            </div>
                          </li>
                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Infants in seat</div>
                              <p class="tcDesc">Yonger then 2</p>
                            </div>
                            <div class="tcInput">
                              <button class="tcButton minus" aria-label="Decrease by one"
                                [disabled]="travelersCount.infantOnSeat === 0" (click)="decrement('infantOnSeat')">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.infantOnSeat}}</div>
                              <button class="tcButton plus" aria-label="Increase by one"
                                (click)="increment('infantOnSeat')" [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="plus">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>
                            </div>

                          </li>
                          <div *ngIf="showError" class="error-message">You must have at least one adult per infant on
                            lap.</div>
                          <div *ngIf="showError1" class="error-message">You must have at least one adult per one
                            infants.</div>
                        </ul>
                        <div class="ctcMain">
                          <legend>Choose Travel Class</legend>
                          <fieldset>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc1" value="ECONOMY" />
                              <label for="ctc1">Economy</label>
                            </div>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc2"
                                value="PREMIUM_ECONOMY" />
                              <label for="ctc2">Premium Economy</label>
                            </div>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc3" value="BUSINESS" />
                              <label for="ctc3">Business</label>
                            </div>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc4" value="FIRST" />
                              <label for="ctc4">First Class</label>
                            </div>
                          </fieldset>
                        </div>
                        <div class="tcBottom">
                          <a href="#" class="aar" style="display: none;">Airline age rules</a>
                          <div class="dFlex tcsBtnMain">
                            <button type="button" class="btn1 tcsCancelBtn"
                              (click)="closeTravellerDropDown()">Cancel</button>
                            <button type="submit" class="btn1" (click)="submitTravelInfo()">Done</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


              </div>

              <div class="searchbtctBlock">

                <button mat-mini-fab color="primary" aria-label="Example icon button with a menu icon"
                  (click)="SearchFlight()">
                  <mat-icon>search</mat-icon>

                </button>
              </div>

            </div>
          </div>


          <div class="multiCity" *ngIf="selectedTripType == 'multiCity' ">

            <div class="mc_tr">
              <mat-form-field appearance="fill">
                <mat-label>Trip Type</mat-label>
                <mat-select [(value)]="selectedTripType">
                  <mat-option value="oneway">One Way</mat-option>
                  <mat-option value="roundTrip">Round Trip</mat-option>
                  <mat-option value="multiCity">MultiCity</mat-option>
                </mat-select>
              </mat-form-field>
              <div class="btctBlock">
                <div style="position: relative;">
                  <mat-form-field appearance="outline" (click)="toggleTravelerOptions()"
                    class="dep_date traveller_cls multiple_city">
                    <img _ngcontent-yre-c46="" src="../../assets/images/passenger.png" alt="" class="field_img2" />
                    <mat-label>Travelers</mat-label>
                    <input matInput formControlName="travelers" readonly>
                    <mat-error *ngIf="myForm.get('travelers')?.hasError('maxTravelersExceeded')">Maximum travelers
                      exceeded (6).</mat-error>
                  </mat-form-field>
                  <div *ngIf="showTravelerOptions" class="travellerCount">
                    <div *ngIf="showTravelerOptions">
                      <div>
                        <div class="tcNote">
                          We allow up to 9 travelers total per booking.
                        </div>
                        <ul class="tCount">
                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Adults</div>
                              <p class="tcDesc">18 and older</p>
                            </div>
                            <div class="tcInput">
                              <button class="tcButton minus" (click)="decrement('adult')" aria-label="Decrease by one"
                                [disabled]="travelersCount.adult ===  1">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.adult }}</div>
                              <button class="tcButton plus" (click)="increment('adult')" aria-label="Increase by one"
                                [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="icon">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>
                            </div>
                          </li>
                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Children</div>
                              <p class="tcDesc">Age 2 through 17</p>
                            </div>

                            <div class="tcInput">
                              <button class="tcButton minus" aria-label="Decrease by one"
                                (click)="decrement('children')" [disabled]="travelersCount.children === 0">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.children }}</div>
                              <button class="tcButton plus" aria-label="Increase by one" (click)="increment('children')"
                                [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="plus">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>
                            </div>

                          </li>



                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Infants on lap</div>
                              <p class="tcDesc">Yonger then 2</p>
                            </div>
                            <div class="tcInput">
                              <button class="tcButton minus" aria-label="Decrease by one"
                                (click)="decrement('infantOnlap')" [disabled]="travelersCount.infantOnlap === 0">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.infantOnlap}}</div>
                              <button class="tcButton plus" aria-label="Increase by one"
                                (click)="increment('infantOnlap')" [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="plus">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>

                            </div>




                          </li>
                          <li>
                            <div class="tCountTitle">
                              <div class="tcLbl">Infants in seat</div>
                              <p class="tcDesc">Yonger then 2</p>
                            </div>
                            <div class="tcInput">
                              <button class="tcButton minus" aria-label="Decrease by one"
                                [disabled]="travelersCount.infantOnSeat === 0" (click)="decrement('infantOnSeat')">
                                <svg width="16" height="2" viewBox="0 0 16 2" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <line y1="1" x2="16" y2="1" stroke="none" stroke-width="2" class="icon" />
                                </svg>
                              </button>
                              <div class="number dim">{{ travelersCount.infantOnSeat}}</div>
                              <button class="tcButton plus" aria-label="Increase by one"
                                (click)="increment('infantOnSeat')" [disabled]="totalTravelers > 9">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                  xmlns="http://www.w3.org/2000/svg" class="plus">
                                  <line x1="8" y1="4.37114e-08" x2="8" y2="16" stroke="none" stroke-width="2" />
                                  <line y1="8" x2="16" y2="8" stroke="none" stroke-width="2" />
                                </svg>
                              </button>
                            </div>

                          </li>
                          <div *ngIf="showError" class="error-message">You must have at least one adult per infant on
                            lap.</div>
                          <div *ngIf="showError1" class="error-message">You must have at least one adult per one
                            infants.</div>

                        </ul>
                        <div class="ctcMain">
                          <legend>Choose Travel Class</legend>
                          <fieldset>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc1" value="ECONOMY" />
                              <label for="ctc1">Economy</label>
                            </div>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc2"
                                value="PREMIUM_ECONOMY" />
                              <label for="ctc2">Premium Economy</label>
                            </div>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc3" value="BUSINESS" />
                              <label for="ctc3">Business</label>
                            </div>
                            <div class="cus-rad">
                              <input type="radio" formControlName="selectedTravelClass" id="ctc4" value="FIRST" />
                              <label for="ctc4">First Class</label>
                            </div>
                          </fieldset>
                        </div>
                        <div class="tcBottom">
                          <a href="#" class="aar" style="display: none;">Airline age rules</a>
                          <div class="dFlex tcsBtnMain">
                            <button type="button" class="btn1 tcsCancelBtn"
                              (click)="closeTravellerDropDown()">Cancel</button>
                            <button type="submit" class="btn1" (click)="submitTravelInfo()">Done</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>


              </div>
            </div>
            <div formArrayName="multiCityFlights">
              <div *ngFor="let multiCityFlight of multiCityFlights.controls; let i = index" [formGroupName]="i">
                <hr>
                <div class="mFlight">Flight {{ i + 1 }}</div>
                <div class="inp_close_wrap">
                  <div class="dFlex btct">
                    <div class="btctBlock bnrOWBlock3 hasRt">
                      <mat-form-field class="example-full-width pl-24" appearance="fill">
                        <img class="field_img" src="../../assets/images/location.png" alt="">
                        <mat-label> Depart From</mat-label>
                        <mat-select formControlName="leavingFrom"
                          (selectionChange)="onLeavingFromSelectionChange($event.value, i)" required>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="leavingFromSearchControls[i]"
                              (input)="onInputChange($event, i)" [placeholderLabel]="'Search'"></ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngIf="loading" disabled>
                            <mat-spinner diameter="16"></mat-spinner>
                          </mat-option>
                          <mat-option *ngFor="let option of leavingFromOptions1[i]" [value]="option">
                            <div class="optionDropDown-container">
                              <div class="detailed-name">{{ option.cityCode }}-{{ option.name }}</div>
                              <div class="city-name">{{ option.cityName }}-{{ option.countryCode }}
                              </div>
                            </div>
                          </mat-option>

                        </mat-select>
                      </mat-form-field>
                      <div
                        *ngIf=" multiCityFlightsError || multiCityFlight.get('leavingFrom')?.invalid && multiCityFlight.get('leavingFrom')?.touched"
                        style="color: red;">
                        Please select a departure location
                      </div>
                      <button type="button" class="rtIcon" (click)="swapMultiCity(i)">
                        <img src="assets/images/rtIcon.png" width="18" height="20" alt="travellout">
                      </button>
                    </div>

                    <div class="btctBlock bnrOWBlock3">
                      <mat-form-field class="example-full-width pl-24" appearance="fill">
                        <img class="field_img" src="../../assets/images/location.png" alt="">
                        <mat-label>Going To</mat-label>
                        <mat-select formControlName="goingTo"
                          (selectionChange)="onGoingFromSelectionChange($event.value, i)" required>
                          <mat-option>
                            <ngx-mat-select-search [formControl]="goingToSearchControls[i]"
                              (input)="onInputChangeGoingTo($event, i)"
                              [placeholderLabel]="'Search for going to'"></ngx-mat-select-search>
                          </mat-option>
                          <mat-option *ngIf="loading" disabled>
                            <mat-spinner diameter="16"></mat-spinner>
                          </mat-option>
                          <mat-option *ngFor="let option of goingToOptions1[i]" [value]="option">
                            <div class="optionDropDown-container">
                              <div class="detailed-name">{{ option.cityCode }}-{{ option.name }}</div>
                              <div class="city-name">{{ option.cityName }}-{{ option.countryCode }}
                              </div>
                            </div>
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <div
                        *ngIf="multiCityFlightsError || multiCityFlight.get('goingTo')?.invalid && multiCityFlight.get('goingTo')?.touched"
                        style="color: red;">
                        Please select arrival location
                      </div>
                    </div>

                    <div class="btctBlock bnrOWBlock3">

                      <mat-form-field appearance="fill" class="m_dp dep_date">
                        <mat-label>Depart Date</mat-label>
                        <input matInput [matDatepicker]="departDatePicker" formControlName="departDate" placeholder=""
                          [min]="minDate">
                        <mat-datepicker-toggle matSuffix [for]="departDatePicker"></mat-datepicker-toggle>
                        <mat-datepicker #departDatePicker></mat-datepicker>
                      </mat-form-field>
                    </div>
                  </div>
                  <button *ngIf="i>=2" mat-raised-button color="warn" (click)="removeMultiCityFlight(i)">
                    <mat-icon>close</mat-icon>
                  </button>
                </div>



                <!-- <div>
                      <button mat-raised-button color="warn">Remove flight</button>
                    </div>  -->
              </div>
              <div class="btm_flx">
                <div>
                  <button mat-icon-button (click)="addMultiCityFlight()">
                    <img src="assets/images/pnk-plus.svg" width="24" height="24" alt="add">
                  </button>
                  <span (click)="addMultiCityFlight()">Add
                    Flights</span>
                </div>
              </div>
            </div>
          </div>
          <button *ngIf="selectedTripType == 'multiCity' " type="submit" class="searchBtn" (click)="SearchFlight()">
            Search
            <span class="btnIcon">
              <img src="assets/images/search.png" width="24" height="24" alt="travellout">
            </span>
          </button>
        </div>

      </div>
      <div *ngIf="!isResolutionValid" class="view-filter-wrap">
        <button class="btn1" (click)="showFilter()">Show Filter</button>
      </div>

      <div class="filtered-content-wrap">
        <div class="container">
          <div class="row">
            <div class="col-md-4">
              <div class="left-select-optiones-wrap" [class.show]="showFilterDropDown"
                *ngIf="flightDataMultiCity.length >= 0 || flightOneWayData.length >= 0 || flightData.length >= 0">

                <div class="checkbox-card">
                  <div class="cc-header" (click)="toggleClass('class1')">
                    <h2>Stops</h2>
                    <span><mat-icon>keyboard_arrow_down</mat-icon></span>
                  </div>

                  <div class="cc-body" [ngClass]="{'my-class1': activeClasses['class1']}">
                    <div class="checklist-1">
                      <mat-selection-list>
                        <mat-list-option checkboxPosition="before" *ngFor="let option of StopsFilter" #optionRef
                          (click)="getOptionValue(option)">
                          <div class="checklist-inner-txt">
                            <span>{{ option.category === 0 ? 'Non Stop' : option.category + ' Stop(s)' }}</span>
                            <span>$ {{ option.lowestPrice }}</span>
                          </div>
                        </mat-list-option>
                      </mat-selection-list>
                    </div>
                  </div>
                </div>

                <div class="divider-hr">
                  <hr />
                </div>

                <div class="checkbox-card">
                  <div class="cc-header" (click)="toggleClass('class2')">
                    <h2>Airlines</h2>
                    <span><mat-icon>keyboard_arrow_down</mat-icon></span>
                  </div>

                  <div class="cc-body" [ngClass]="{'my-class2': activeClasses['class2']}">
                    <div class="checklist-1">
                      <mat-selection-list>
                        <mat-list-option checkboxPosition="before" *ngFor="let option of airlineFilter"
                          (click)="getOptionValue(option)">
                          <div class="checklist-inner-txt">
                            <span>{{ option.category }} </span>
                            <span>${{ option.lowestPrice }}</span>
                          </div>
                        </mat-list-option>
                      </mat-selection-list>
                    </div>
                  </div>
                </div>

                <div class="divider-hr">
                  <hr />
                </div>

                <div class="checkbox-card">
                  <div class="cc-header" (click)="toggleClass('class3')">
                    <h2>Travel and Baggage</h2>
                    <span><mat-icon>keyboard_arrow_down</mat-icon></span>
                  </div>
                  <div class="cc-body" [ngClass]="{'my-class3': activeClasses['class3']}">
                    <div class="checklist-1">
                      <mat-selection-list>
                        <mat-list-option checkboxPosition="before">
                          <div class="checklist-inner-txt">
                            <span>Seat choice included</span>
                            <span>$ 118</span>
                          </div>
                        </mat-list-option>
                        <mat-list-option checkboxPosition="before">
                          <div class="checklist-inner-txt">
                            <span>Carry-on bag included</span>
                            <span>$ 258</span>
                          </div>
                        </mat-list-option>
                        <mat-list-option checkboxPosition="before">
                          <div class="checklist-inner-txt">
                            <span>No cancel fee</span>
                            <span>$ 158</span>
                          </div>
                        </mat-list-option>
                        <mat-list-option checkboxPosition="before">
                          <div class="checklist-inner-txt">
                            <span>No change fee</span>
                            <span>$ 238</span>
                          </div>
                        </mat-list-option>
                      </mat-selection-list>
                    </div>
                  </div>
                </div>

                <div class="divider-hr">
                  <hr />
                </div>

                <div class="checkbox-card">
                  <div class="cc-header" (click)="toggleClass('class4')">
                    <h2>Departure Time</h2>
                    <div class="icon-container">
                      <span><mat-icon>keyboard_arrow_down</mat-icon></span>
                    </div>
                  </div>

                  <div class="cc-body" [ngClass]="{'my-class4': activeClasses['class4']}">
                    <span class="clear-icon"(click)="clearSelection()">clear</span>
                    <div class="px-20">
                      <div class="row gutter-20">
                        <!-- Iterate over the departure filter array -->
                        <ng-container *ngFor="let filterItem of departureFilter">
                          <!-- Check if the duration exists in the filter -->
                          <div class="col-sm-4 col-6 mb-20">
                            <label class="departure-time-box-wrap" for="{{filterItem.id}}">
                              <input type="radio" name="departure-time" id="{{filterItem.id}}"
                                (change)="getOptionValue(filterItem)">
                              <div class="departure-time-box">
                                <svg width="36" height="36" viewBox="0 0 36 36" fill="none"
                                  xmlns="http://www.w3.org/2000/svg">
                                  <ng-container *ngIf="filterItem.category === 'Morning'">
                                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none"
                                      xmlns="http://www.w3.org/2000/svg">
                                      <path d="M19.5 6V1.5H16.5V6H19.5Z" fill="white" />
                                      <path fill-rule="evenodd" clip-rule="evenodd"
                                        d="M18 27C20.3869 27 22.6761 26.0518 24.364 24.364C26.0518 22.6761 27 20.3869 27 18C27 15.6131 26.0518 13.3239 24.364 11.636C22.6761 9.94821 20.3869 9 18 9C15.6131 9 13.3239 9.94821 11.636 11.636C9.94821 13.3239 9 15.6131 9 18C9 20.3869 9.94821 22.6761 11.636 24.364C13.3239 26.0518 15.6131 27 18 27ZM18 24C19.5913 24 21.1174 23.3679 22.2426 22.2426C23.3679 21.1174 24 19.5913 24 18C24 16.4087 23.3679 14.8826 22.2426 13.7574C21.1174 12.6321 19.5913 12 18 12C16.4087 12 14.8826 12.6321 13.7574 13.7574C12.6321 14.8826 12 16.4087 12 18C12 19.5913 12.6321 21.1174 13.7574 22.2426C14.8826 23.3679 16.4087 24 18 24Z"
                                        fill="white" />
                                      <path
                                        d="M30 16.5H34.5V19.5H30V16.5ZM6 16.5H1.5V19.5H6V16.5ZM19.5 30V34.5H16.5V30H19.5ZM10.575 27.54L7.395 30.75L5.25 28.605L8.445 25.425L10.545 27.54H10.575ZM27.54 10.575L30.72 7.395L28.605 5.265L25.425 8.46L27.54 10.575ZM25.425 27.54L28.605 30.735L30.735 28.605L27.54 25.425L25.44 27.54H25.425ZM8.46 10.575L5.28 7.395L7.395 5.25L10.575 8.445L8.46 10.56V10.575Z"
                                        fill="white" />
                                    </svg>
                                  </ng-container>
                                  <ng-container *ngIf="filterItem.category === 'Afternoon'">
                                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none"
                                      xmlns="http://www.w3.org/2000/svg">
                                      <path
                                        d="M19.5 4.5H16.5V9H19.5V4.5ZM10.575 11.46L7.395 8.25L5.28 10.395L8.46 13.575L10.575 11.46ZM27 21C27 23.31 26.13 25.41 24.705 27H34.5V30H1.5V27H11.295C10.3216 25.9129 9.62714 24.6054 9.27146 23.1902C8.91577 21.775 8.90953 20.2945 9.25328 18.8763C9.59702 17.4582 10.2804 16.1449 11.2446 15.0496C12.2088 13.9543 13.4249 13.1099 14.788 12.5891C16.1512 12.0683 17.6205 11.8868 19.0694 12.0602C20.5183 12.2336 21.9033 12.7566 23.105 13.5843C24.3068 14.4121 25.2893 15.5196 25.9678 16.8114C26.6463 18.1033 27.0006 19.5408 27 21Z"
                                        fill="#3D3D3D" />
                                      <path
                                        d="M34.5 19.4999H30V22.4999H34.5V19.4999ZM1.5 19.4999H6V22.4999H1.5V19.4999ZM28.605 8.26489L25.425 11.4599L27.54 13.5749L30.72 10.3949L28.605 8.26489Z"
                                        fill="#3D3D3D" />
                                    </svg>
                                  </ng-container>
                                  <ng-container *ngIf="filterItem.category === 'Evening'">

                                    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"
                                      fill="none">
                                      <path
                                        d="M21.0151 3L23.2501 5.235L21.0151 7.47L18.7801 5.22L21.0301 3H21.0151ZM33.0001 22.02C30.339 23.3896 27.3117 23.8789 24.3547 23.4174C21.3976 22.9558 18.6634 21.5672 16.5463 19.4518C14.4292 17.3363 13.0384 14.6033 12.5745 11.6465C12.1107 8.68983 12.5976 5.66218 13.9651 3C11.4191 3.75351 9.11272 5.156 7.2723 7.06985C5.43188 8.9837 4.12065 11.3432 3.46727 13.9167C2.81389 16.4902 2.84082 19.1894 3.5454 21.7494C4.24999 24.3094 5.60803 26.6422 7.48627 28.519C9.3645 30.3957 11.6984 31.7519 14.2589 32.4545C16.8195 33.1571 19.5187 33.1818 22.0917 32.5264C24.6647 31.871 27.0231 30.5579 28.9355 28.716C30.8479 26.8741 32.2486 24.5666 33.0001 22.02Z"
                                        fill="#3d3d3d" />
                                      <path
                                        d="M27.78 9.0752L29.4599 11.8652L32.25 13.5302L29.4599 15.2102L27.78 18.0002L26.115 15.2102L23.325 13.5302L26.115 11.8652L27.78 9.0752Z"
                                        fill="#3d3d3d" />
                                    </svg>
                                  </ng-container>
                                </svg>
                                <h2>{{ filterItem.category }}</h2>

                                <p>{{ getDepartureTimeRange(filterItem.category) }}</p>
                              </div>
                            </label>
                          </div>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="divider-hr">
                  <hr />
                </div>

                <div class="checkbox-card">
                  <div class="cc-header" (click)="toggleClass('class5')">
                    <h2>Arrival Time</h2>
                    <div class="icon-container">
                      <span><mat-icon>keyboard_arrow_down</mat-icon></span>
                    </div>
                  </div>
                  <div class="cc-body" [ngClass]="{'my-class4': activeClasses['class5']}">
                    <span class="clear-icon" (click)="clearArrivalSelection()">clear</span>
                    <div class="px-20">
                      <div class="row gutter-20">
                        <div class="col-sm-4 col-6 mb-20" *ngFor="let arrivalFilters of arrivalFilter">
                          <label class="departure-time-box-wrap" for="{{arrivalFilters.id}}">
                            <input type="radio" name="Arrival-Time" id="{{arrivalFilters.id}}"
                              (click)="getOptionValue(arrivalFilters)">

                            <div class="departure-time-box">

                              <svg *ngIf="arrivalFilters.category === 'Early Morning'" width="36" height="36"
                                viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.5 6V1.5H16.5V6H19.5Z" fill="white" />
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M18 27C20.3869 27 22.6761 26.0518 24.364 24.364C26.0518 22.6761 27 20.3869 27 18C27 15.6131 26.0518 13.3239 24.364 11.636C22.6761 9.94821 20.3869 9 18 9C15.6131 9 13.3239 9.94821 11.636 11.636C9.94821 13.3239 9 15.6131 9 18C9 20.3869 9.94821 22.6761 11.636 24.364C13.3239 26.0518 15.6131 27 18 27ZM18 24C19.5913 24 21.1174 23.3679 22.2426 22.2426C23.3679 21.1174 24 19.5913 24 18C24 16.4087 23.3679 14.8826 22.2426 13.7574C21.1174 12.6321 19.5913 12 18 12C16.4087 12 14.8826 12.6321 13.7574 13.7574C12.6321 14.8826 12 16.4087 12 18C12 19.5913 12.6321 21.1174 13.7574 22.2426C14.8826 23.3679 16.4087 24 18 24Z"
                                  fill="white" />
                                <path
                                  d="M30 16.5H34.5V19.5H30V16.5ZM6 16.5H1.5V19.5H6V16.5ZM19.5 30V34.5H16.5V30H19.5ZM10.575 27.54L7.395 30.75L5.25 28.605L8.445 25.425L10.545 27.54H10.575ZM27.54 10.575L30.72 7.395L28.605 5.265L25.425 8.46L27.54 10.575ZM25.425 27.54L28.605 30.735L30.735 28.605L27.54 25.425L25.44 27.54H25.425ZM8.46 10.575L5.28 7.395L7.395 5.25L10.575 8.445L8.46 10.56V10.575Z"
                                  fill="white" />
                              </svg>

                              <svg *ngIf="arrivalFilters.category === 'Morning'" width="36" height="36" width="36"
                                height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.5 6V1.5H16.5V6H19.5Z" fill="white" />
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M18 27C20.3869 27 22.6761 26.0518 24.364 24.364C26.0518 22.6761 27 20.3869 27 18C27 15.6131 26.0518 13.3239 24.364 11.636C22.6761 9.94821 20.3869 9 18 9C15.6131 9 13.3239 9.94821 11.636 11.636C9.94821 13.3239 9 15.6131 9 18C9 20.3869 9.94821 22.6761 11.636 24.364C13.3239 26.0518 15.6131 27 18 27ZM18 24C19.5913 24 21.1174 23.3679 22.2426 22.2426C23.3679 21.1174 24 19.5913 24 18C24 16.4087 23.3679 14.8826 22.2426 13.7574C21.1174 12.6321 19.5913 12 18 12C16.4087 12 14.8826 12.6321 13.7574 13.7574C12.6321 14.8826 12 16.4087 12 18C12 19.5913 12.6321 21.1174 13.7574 22.2426C14.8826 23.3679 16.4087 24 18 24Z"
                                  fill="white" />
                                <path
                                  d="M30 16.5H34.5V19.5H30V16.5ZM6 16.5H1.5V19.5H6V16.5ZM19.5 30V34.5H16.5V30H19.5ZM10.575 27.54L7.395 30.75L5.25 28.605L8.445 25.425L10.545 27.54H10.575ZM27.54 10.575L30.72 7.395L28.605 5.265L25.425 8.46L27.54 10.575ZM25.425 27.54L28.605 30.735L30.735 28.605L27.54 25.425L25.44 27.54H25.425ZM8.46 10.575L5.28 7.395L7.395 5.25L10.575 8.445L8.46 10.56V10.575Z"
                                  fill="white" />
                              </svg>

                              <svg *ngIf="arrivalFilters.category === 'Afternoon'" width="36" height="36"
                                viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">


                                <path
                                  d="M19.5 4.5H16.5V9H19.5V4.5ZM10.575 11.46L7.395 8.25L5.28 10.395L8.46 13.575L10.575 11.46ZM27 21C27 23.31 26.13 25.41 24.705 27H34.5V30H1.5V27H11.295C10.3216 25.9129 9.62714 24.6054 9.27146 23.1902C8.91577 21.775 8.90953 20.2945 9.25328 18.8763C9.59702 17.4582 10.2804 16.1449 11.2446 15.0496C12.2088 13.9543 13.4249 13.1099 14.788 12.5891C16.1512 12.0683 17.6205 11.8868 19.0694 12.0602C20.5183 12.2336 21.9033 12.7566 23.105 13.5843C24.3068 14.4121 25.2893 15.5196 25.9678 16.8114C26.6463 18.1033 27.0006 19.5408 27 21Z"
                                  fill="#3D3D3D" />
                                <path
                                  d="M34.5 19.4999H30V22.4999H34.5V19.4999ZM1.5 19.4999H6V22.4999H1.5V19.4999ZM28.605 8.26489L25.425 11.4599L27.54 13.5749L30.72 10.3949L28.605 8.26489Z"
                                  fill="#3D3D3D" />

                              </svg>

                              <svg *ngIf="arrivalFilters.category === 'Evening'" xmlns="http://www.w3.org/2000/svg"
                                width="36" height="36" viewBox="0 0 36 36" fill="none">
                                <path
                                  d="M21.0151 3L23.2501 5.235L21.0151 7.47L18.7801 5.22L21.0301 3H21.0151ZM33.0001 22.02C30.339 23.3896 27.3117 23.8789 24.3547 23.4174C21.3976 22.9558 18.6634 21.5672 16.5463 19.4518C14.4292 17.3363 13.0384 14.6033 12.5745 11.6465C12.1107 8.68983 12.5976 5.66218 13.9651 3C11.4191 3.75351 9.11272 5.156 7.2723 7.06985C5.43188 8.9837 4.12065 11.3432 3.46727 13.9167C2.81389 16.4902 2.84082 19.1894 3.5454 21.7494C4.24999 24.3094 5.60803 26.6422 7.48627 28.519C9.3645 30.3957 11.6984 31.7519 14.2589 32.4545C16.8195 33.1571 19.5187 33.1818 22.0917 32.5264C24.6647 31.871 27.0231 30.5579 28.9355 28.716C30.8479 26.8741 32.2486 24.5666 33.0001 22.02Z"
                                  fill="#3d3d3d" />
                                <path
                                  d="M27.78 9.0752L29.4599 11.8652L32.25 13.5302L29.4599 15.2102L27.78 18.0002L26.115 15.2102L23.325 13.5302L26.115 11.8652L27.78 9.0752Z"
                                  fill="#3d3d3d" />
                              </svg>
                              <h2>{{ arrivalFilters.category }}</h2>
                              <p>{{ getDepartureTimeRange(arrivalFilters.category) }}</p>
                            </div>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>


                </div>

              </div>

            </div>
            <div class="col-md-8">
              <div>
                <div class="inner-breadcrums" *ngIf="selectedTripType == 'roundTrip'">
                  <ul>
                    <li *ngIf="!flightSelected || flightSelected.length === 0">
                      <a (click)="handleTripClick(0)"
                        [ngClass]="{ 'active': activeIndex === 0, 'dull': activeIndex !== 0 }">Choose
                        departing flight</a>
                    </li>
                    <li *ngIf="flightSelected && flightSelected.length > 0">
                      <a (click)="handleTripClick(0)"
                        [ngClass]="{ 'active': activeIndex === 0, 'dull': activeIndex !== 0 }">{{
                        flightSelected[0].airlineName }}  {{ flightSelected[0].departureAirportIATACode }} -> {{
                        flightSelected[0].arrivalAirportIATACode }}</a><br>
                      <a class="change_trip" (click)="changeSelectedFlight(0)">Change flight</a>
                    </li>
                    <li>
                      <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 11L13 6L8 1M1 11L6 6L1 1" stroke="white" stroke-opacity="0.4" stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </li>
                    <li *ngIf="(!flightSelected || flightSelected.length < 2 || !flightSelected[1])"> <a
                        (click)="handleTripClick(1)"
                       
                        [attr.aria-disabled]="flightSelected.length <= 1 ? true : null"
                        [ngClass]="{ 'active': activeIndex === 1, 'dull': activeIndex !== 1,'disabled': flightSelected.length <= 1 }">Choose
                        returning
                        flight</a>
                    </li>

                    <li *ngIf="flightSelected && flightSelected.length > 1 && flightSelected[1]">
                      <a (click)="handleTripClick(1)"
                        [ngClass]="{ 'active': activeIndex === 1, 'dull': activeIndex !== 1 }">{{
                        flightSelected[1].airlineName }}  {{ flightSelected[1].departureAirportIATACode }} -> {{
                        flightSelected[1].arrivalAirportIATACode }}</a><br>
                      <a class="change_trip" (click)="changeSelectedFlight(1)">Change flight</a>
                    </li>

                    <li>
                      <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 11L13 6L8 1M1 11L6 6L1 1" stroke="white" stroke-opacity="0.4" stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </li>
                    <li [ngClass]="{ 'active': activeIndex === 3, 'dull': activeIndex !== 3 }">Review your trip
                    </li>
                  </ul>
                </div>
                <div class="inner-breadcrums" *ngIf="selectedTripType == 'multiCity'">
                  <ul>
                    <ng-container *ngFor="let pair of flightMultiCitySearchDetail; let i = index">
                      <ng-container *ngIf="!(flightSelected && flightSelected[i])">
                        <li>
                          <a (click)="handleTripClick(i)"
                            [ngClass]="{ 'active': activeIndex === i, 'dull': activeIndex !== i }"> Choose
                            flight to {{ pair.origin }} > {{
                            pair.destination }}</a>
                        </li>
                      </ng-container>

                      <ng-container *ngIf="flightSelected && flightSelected[i]">
                        <li>
                          <a (click)="handleTripClick(i)"
                            [ngClass]="{ 'active': activeIndex === i, 'dull': activeIndex !== i }">{{
                            flightSelected[i].airlineName }}  {{ flightSelected[i].departureAirportIATACode }} -> {{
                            flightSelected[i].arrivalAirportIATACode }}</a><br>
                          <a (click)="changeSelectedFlight(1)">Change flight</a>
                        </li>
                      </ng-container>
                      <li>
                        <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M8 11L13 6L8 1M1 11L6 6L1 1" stroke="white" stroke-opacity="0.4" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </li>
                    </ng-container>
                    <li>Review your trip</li>
                  </ul>

                </div>
                <div class="inner-breadcrums" *ngIf="selectedTripType == 'oneway'">
                  <ul>
                    <li *ngIf="!flightSelected || flightSelected.length === 0">
                      <a (click)="handleTripClick(0)"
                        [ngClass]="{ 'active': activeIndex === 0, 'dull': activeIndex !== 0 }">Choose
                        departing flight</a>
                    </li>
                    <li *ngIf="flightSelected && flightSelected.length > 0">
                      <a (click)="handleTripClick(0)"
                        [ngClass]="{ 'active': activeIndex === 0, 'dull': activeIndex !== 0 }">{{
                        flightSelected[0].airlineName }}  {{ flightSelected[0].departureAirportIATACode }} -> {{
                        flightSelected[0].arrivalAirportIATACode }}</a><br>
                      <a class="change_trip" (click)="changeSelectedFlight(0)">Change flight</a>
                    </li>
                    <li>
                      <svg width="14" height="12" viewBox="0 0 14 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 11L13 6L8 1M1 11L6 6L1 1" stroke="white" stroke-opacity="0.4" stroke-width="2"
                          stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </li>
                    <li [ngClass]="{ 'active': activeIndex === 1, 'dull': activeIndex !== 1 }">Review your trip
                    </li>
                  </ul>
                </div>

              </div>

              <div id="date-carousel" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <div class="datebox-row">
                      <div class="date-box-1" *ngFor="let dateObject of displayedDates; let i = index"
                        [class.selected]="i === centerBoxIndex" (click)="selectedDateBox(i,dateObject)">
                        <p class="db1-date">{{ dateObject.day }} <span>{{ dateObject.month }} {{ dateObject.date
                            }}</span>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#date-carousel" data-bs-slide="prev"
                  (click)="showPreviousDates()">
                  <span class="material-symbols-outlined">
                    chevron_left
                  </span>
                  <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#date-carousel" data-bs-slide="next"
                  (click)="showNextDates()">
                  <span class="material-symbols-outlined">
                    chevron_right
                  </span>
                  <span class="visually-hidden">Next</span>
                </button>
              </div>



              <div class="filter-by">
                <div class="fb-left-content">
                  <p>Prices displayed include taxes and may change based on availability. You can review any
                    additional fees before checkout. Prices are not final until you complete your purchase.
                  </p>
                </div>
                <mat-form-field appearance="outline">
                  <mat-label>Sort By:</mat-label>
                  <mat-select #sortSelect (selectionChange)="getFlightdataSort($event)">
                    <mat-option *ngFor="let option of sortOptions" [value]="option.value">
                      {{ option.label }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div *ngIf="selectedTripType != 'roundTrip'">
                <div class="ipcbCtntIn">
                  <ng-container *ngFor="let flight of flightOneWayData; let i = index">
                    <div *ngIf="flight.itineraries[0].segments.length > 0">
                      <div *ngIf="i < numFlightsShown" class="dFlex ipcbCard" (click)="flightInfo(flight)">
                        <div class="ipcbCardLeft">
                          <div>
                            <div class="ipcbcTime" *ngIf="!isConnectingFlightEmpty(flight)">
                              {{ flight.itineraries[0].segments[0].departure.at | date:'shortTime' }} -
                              {{ flight.itineraries[0].segments[0].arrival.at | date:'shortTime' }}
                            </div>
                            <div class="ipcbcAp" *ngIf="!isConnectingFlightEmpty(flight)">
                              {{ getCityName( flight.itineraries[0].segments[0].departure.iataCode, flight) }} -
                              {{ getCityName( flight.itineraries[0].segments[0].arrival.iataCode, flight) }}
                            </div>
                            <div class="ipcbcTime" *ngIf="isConnectingFlightEmpty(flight)">
                              {{ getLastSegmentArrivalDetails(flight).deapartureTime | date:'shortTime' }} -
                              {{ getLastSegmentArrivalDetails(flight).time | date:'shortTime' }}
                            </div>
                            <div class="ipcbcAp" *ngIf="isConnectingFlightEmpty(flight)">
                              {{ getLastSegmentArrivalDetails(flight).deapartureIataCode }} -
                              {{ getLastSegmentArrivalDetails(flight).iataCode }}
                            </div>
                            <div class="ipcbcAn">
                              <!-- <img [src]="getImageUrl('B6')" alt="Image 0V"> -->
                              <img [src]="getImageUrl(flight.airlines[0].carrierCode)" alt="Image 0V" style="width: 24px;height: 20px;">
                              <!-- <img src="assets/airline/B6.png" width="10" height="10" alt="travellout"> -->
                              {{ flight.airlines[0].commonName }}
                            </div>

                          </div>
                        </div>
                        <div class="ipcbCardMid">
                          <div class="ipcbcRt">{{ flight.itineraries[0].duration.slice(2) }} <span
                              *ngIf="flight.itineraries[0].segments.length > 1">
                              ({{ flight.itineraries[0].segments.length - 1 }} Stops)
                            </span>
                            <span *ngIf="flight.itineraries[0].segments.length <= 1">
                              (Nonstop)
                            </span>
                          </div>
                          <div class="ipcbcBdrImg">
                            <img src="assets/images/bdrImg.png" width="142" height="12" alt="travellout">
                          </div>
                          <div class="ipcbcRt cg" *ngIf="isConnectingFlightEmpty(flight)">
                            <div class="ipcbcDuration" *ngFor="let aircode of getNextAirportIATACodes(flight)"
                              [title]="getAirportDetails(flight.itineraries[0].segments,flight)">
                              via {{ aircode }}
                            </div>
                          </div>
                        </div>
                        <div class="ipcbCardRight">
                          <div class="ipcbcPrice">$ {{ flight.price.base }}</div>
                          <div class="ipcbcPer">per traveler</div>
                          <div (click)="$event.stopPropagation()" class="seat-selection"
                            (click)="openSeatSelection(flight, i)">Availability seating</div>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                </div>
                <div class="button-container"> <button class="button-style btn1" style="margin-right: 10px;"
                    *ngIf="flightOneWayData.length > numFlightsShown" (click)="showMoreFlights()">Show
                    More</button>
                  <button class="button-style btn1" *ngIf="numFlightsShown > 6" (click)="showLessFlights()">Show
                    Less</button>
                </div>
              </div>
              <div *ngIf="selectedTripType == 'roundTrip'">
                <div *ngIf=" flightData.length > 0;">

                  <div class="ipcbCtntIn">
                    <ng-container *ngFor="let flight of flightData; let i = index">
                      <div *ngIf="flight.itineraries[0].segments.length > 0">
                        <div *ngIf="i < numFlightsShown" class="dFlex ipcbCard" (click)="flightInfo(flight)">
                          <div class="ipcbCardLeft">
                            <div>
                              <div class="ipcbcTime" *ngIf="!isConnectingFlightEmpty(flight)">
                                {{ flight.itineraries[0].segments[0].departure.at | date:'shortTime' }} -
                                {{ flight.itineraries[0].segments[0].arrival.at | date:'shortTime' }}
                              </div>
                              <div class="ipcbcAp" *ngIf="!isConnectingFlightEmpty(flight)">
                                {{ getCityName( flight.itineraries[0].segments[0].departure.iataCode, flight) }} -
                                {{ getCityName( flight.itineraries[0].segments[0].arrival.iataCode, flight) }}
                              </div>
                              <div class="ipcbcTime" *ngIf="isConnectingFlightEmpty(flight)">
                                {{ getLastSegmentArrivalDetails(flight).deapartureTime | date:'shortTime' }} -
                                {{ getLastSegmentArrivalDetails(flight).time | date:'shortTime' }}
                              </div>
                              <div class="ipcbcAp" *ngIf="isConnectingFlightEmpty(flight)">
                                {{ getLastSegmentArrivalDetails(flight).deapartureIataCode }} -
                                {{ getLastSegmentArrivalDetails(flight).iataCode }}
                              </div>
                              <div class="ipcbcAn">
                               
                                <img [src]="getImageUrl(flight.airlines[0].carrierCode)" alt="Image 0V" style="width: 24px;height: 20px;">
                                {{ flight.airlines[0].commonName }}
                              </div>

                            </div>
                          </div>
                          <div class="ipcbCardMid">

                            <div class="ipcbcRt">{{ flight.itineraries[0].duration.slice(2) }} <span
                                *ngIf="flight.itineraries[0].segments.length > 1">
                                ({{ flight.itineraries[0].segments.length - 1 }} Stops)
                              </span>
                              <span *ngIf="flight.itineraries[0].segments.length <= 1">
                                (Nonstop)
                              </span>
                            </div>
                            <div class="ipcbcBdrImg">
                              <img src="assets/images/bdrImg.png" width="142" height="12" alt="travellout">
                            </div>
                            <div class="ipcbcRt cg" *ngIf="isConnectingFlightEmpty(flight)">
                              <div class="ipcbcDuration" *ngFor="let aircode of getNextAirportIATACodes(flight)"
                                [title]="getAirportDetails(flight.itineraries[0].segments,flight)">
                                via {{ aircode }}
                              </div>
                            </div>
                          </div>
                          <div class="ipcbCardRight">
                            <div class="ipcbcPrice">$ {{ flight.price.base }}</div>
                            <div class="ipcbcPer">per traveler</div>
                            <div (click)="$event.stopPropagation()" class="seat-selection"
                              (click)="openSeatSelection(flight, i)">Availability seating</div>
                          </div>
                        </div>
                      </div>

                    </ng-container>
                  </div>
                </div>
                <div class="button-container"> <button class="button-style btn1"
                    *ngIf="flightData.length > numFlightsShown" (click)="showMoreFlights()"
                    style="margin-right: 10px;">Show
                    More</button>
                  <button class="button-style btn1" *ngIf="numFlightsShown > 6" (click)="showLessFlights()">Show
                    Less</button>
                </div>
              </div>




              <div *ngIf="selectedTripType == 'multiCity'">
                <div *ngIf="flightDataMultiCity.length >0 ">
                  <div class="ipcbCtntIn">
                    <ng-container *ngFor="let flight of flightDataMultiCity;  let i = index">
                      <div *ngIf="flight.itineraries[0].segments.length > 0">
                        <div *ngIf="i < numFlightsShown" class="dFlex ipcbCard" (click)="flightInfo(flight)">
                          <div class="ipcbCardLeft">
                            <div>
                              <div class="ipcbcTime" *ngIf="!isConnectingFlightEmpty(flight)">
                                {{ flight.itineraries[0].segments[0].departure.at | date:'shortTime' }} -
                                {{ flight.itineraries[0].segments[0].arrival.at | date:'shortTime' }}
                              </div>

                              <div class="ipcbcAp" *ngIf="!isConnectingFlightEmpty(flight)">
                                {{ getCityName( flight.itineraries[0].segments[0].departure.iataCode, flight) }} -
                                {{ getCityName( flight.itineraries[0].segments[0].arrival.iataCode, flight) }}
                              </div>
                              <div class="ipcbcTime" *ngIf="isConnectingFlightEmpty(flight)">
                                {{ getLastSegmentArrivalDetails(flight).deapartureTime | date:'shortTime' }} -
                                {{ getLastSegmentArrivalDetails(flight).time | date:'shortTime' }}
                              </div>
                              <div class="ipcbcAp" *ngIf="isConnectingFlightEmpty(flight)">
                                {{ getLastSegmentArrivalDetails(flight).deapartureIataCode }} -
                                {{ getLastSegmentArrivalDetails(flight).iataCode }}
                              </div>
                              <div class="ipcbcAn">
                                <img [src]="getImageUrl(flight.airlines[0].carrierCode)" alt="Image 0V" style="width: 24px;height: 20px;">
                                <!-- <img src="assets/images/apImg.png" width="10" height="10" alt="travellout"> -->
                                {{ flight.airlines[0].commonName }}
                              </div>

                            </div>
                          </div>
                          <div class="ipcbCardMid">

                            <div class="ipcbcRt">{{ flight.itineraries[0].duration.slice(2) }} <span
                                *ngIf="flight.itineraries[0].segments.length > 1">
                                ({{ flight.itineraries[0].segments.length - 1 }} Stops)
                              </span>
                              <span *ngIf="flight.itineraries[0].segments.length <= 1">
                                (Nonstop)
                              </span>
                            </div>
                            <div class="ipcbcBdrImg">
                              <img src="assets/images/bdrImg.png" width="142" height="12" alt="travellout">
                            </div>
                            <div class="ipcbcRt cg" *ngIf="isConnectingFlightEmpty(flight)">
                              <div class="ipcbcDuration" *ngFor="let aircode of getNextAirportIATACodes(flight)"
                                [title]="getAirportDetails(flight.itineraries[0].segments,flight)">
                                via {{ aircode }}
                              </div>
                            </div>
                          </div>
                          <div class="ipcbCardRight">
                            <div class="ipcbcPrice">$ {{ flight.price.base }}</div>
                            <div class="ipcbcPer">per traveler</div>
                            <div (click)="$event.stopPropagation()" class="seat-selection"
                              (click)="openSeatSelection(flight, i)">Availability seating</div>
                          </div>
                        </div>
                      </div>

                    </ng-container>
                  </div>
                  <div class="button-container"> <button class="button-style btn1" style="margin-right: 10px;"
                      *ngIf="flightDataMultiCity.length > numFlightsShown" (click)="showMoreFlights()">Show
                      More</button>
                    <button class="button-style btn1" *ngIf="numFlightsShown > 6" (click)="showLessFlights()">Show
                      Less</button>
                  </div>
                </div>

              </div>
              <div *ngIf="flightDataMultiCity.length === 0 && flightOneWayData.length === 0 && flightData.length === 0">
                <div>
                  There are No flights that match your search criteria. Please change the selected filter and try again.
                  <div class="button-container">
                    <button class="button-style btn1" style="margin-right: 10px;" (click)="clearFilter()">Clear
                      filter</button>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="showTicketSummarry">
      <app-ticket-summary [selectedFlightOffer]="selectedFlightOffer" [tripType]="selectedTripType"
        [travellerType]="travelersCount" [totalTravelers]="totalTravelers" [selectedSeatsData]="selectedSeats"
        [flightDeatils]="flightSelectedArray" (close)="changeSelectedFlight($event)"></app-ticket-summary>

    </div>
  </div>

</div>